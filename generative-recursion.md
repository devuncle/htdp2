# Generative Recursion 生成递归

如果遵循前四部分的设计方法，要么将领域知识转化为代码，要么利用数据定义的结构来组织代码。我们将那些与“结构”组进行分组。后者函数通常将其参数分解为它们的直接结构组件，然后处理这些组件。如果这些直接组件之一与输入属于同一类数据，则该函数在结构上是递归的。尽管结构设计的功能构成了世界上绝大多数代码，但是使用结构化的设计方法无法解决某些问题。

为了解决这些复杂的问题，程序员使用生成式递归，这种形式的递归比结构递归更强大。生成递归的研究与数学一样古老，通常被称为算法研究。算法的输入表示一个问题。一种算法倾向于将一个问题重新排列为一系列问题，加以解决，然后将其解决方案组合为一个整体解决方案。通常，这些新生成的问题中的一些问题与给定的问题相同，在这种情况下，可以重用该算法来解决它们。在这些情况下，该算法是递归的，但是其递归使用新生成的数据而不是输入数据的直接部分。

从生成递归的描述中可以看出，设计生成递归函数比设计结构递归函数更特别。尽管如此，通用设计秘诀的许多元素也适用于算法设计，而本书的这一部分说明了设计秘诀的方式和作用。设计算法的关键是“生成”步骤，这通常意味着划分问题。找出一种解决问题的新颖方法需要洞察力。在希腊语中，这是“尤里卡！”，有时几乎不需要洞察力。例如，它可能只需要一些有关分解字母序列的常识。在其他时候，它可能依赖于关于数字的深层数学定理。实际上，程序员自己设计简单的算法，并依靠领域专家来解决复杂的问题。无论哪种方式，程序员都必须彻底理解其基本思想，以便他们可以编写算法并让程序与未来的读者交流。熟悉该想法的最佳方法是研究大量示例，并对可能在现实世界中出现的各种生成递归产生一种感觉。

## 25 Non-standard Recursion

至此，您已经设计了许多使用结构递归的函数。 设计功能时，您知道需要查看其主要输入的数据定义。 如果此输入是通过自引用数据定义描述的，则最终会得到一个函数，该函数基本上引用自身，而数据定义引用自身。

本章介绍了两个不同使用递归的示例程序。 它们说明了需要一些“尤里卡”的问题，从明显的想法到复杂的见识。

### 25.1 Recursion without Structure

假设您已加入DrRacket团队。 该团队正在开发一种共享服务，以支持程序员之间的协作。 具体而言，DrRacket的下一个修订版将使ISL程序员能够在多台计算机上共享其DrRacket定义区域的内容。 每次一个程序员修改缓冲区时，修改后的DrRacket都会向参与共享会话的DrRacket实例广播定义区域的内容。

**示例问题**您的任务是设计函数名字为bundle，该函数准备广播的定义区域的内容。 DrRacket将内容作为1String列表移交。 该函数的任务是将各个“字母”的块捆绑成块，从而生成给定长度（称为块大小）的字符串（称为块）列表。

## 26 设计算法

本部分的概述已经说明，生成递归函数的设计比结构设计更特别。 如第一章所示，两个生成的递归在处理函数的方式上可能根本不同。 bundle和quicksort <进程列表都可以，但是前者至少尊重给定列表中的顺序，而后者则可以随意重新排列其给定列表。 问题是，单个设计方案是否可以帮助创建如此广泛不同的功能。

第一部分说明如何使设计配方的过程尺寸适应生成递归。 第二部分介绍了另一个新现象：一种算法可能无法为其某些输入提供答案。 因此，程序员必须分析他们的程序，并在注释中补充有关终止的信息。 其余部分对比结构递归和生成递归。

## 30 小结

本书的第五部分介绍了尤里卡的想法！进入程序设计。与前四个部分的结构设计不同，尤里卡！设计从程序应该如何解决问题或处理代表问题的数据的想法开始。在这里进行设计意味着针对新的问题提出一种聪明的方法来调用递归函数，该新问题类似于给定的问题，但更为简单。

请记住，尽管我们将其称为生成递归，但大多数计算机科学家都将这些功能称为算法。

完成本书的这一部分后，您将了解有关生成递归设计的以下内容：
设计配方的标准轮廓仍然有效。

主要变化涉及编码步骤。它介绍了四个新问题，即从用于生成递归的完全通用模板到完整的功能。有了其中两个问题，您便可以得出解决方案过程中的“琐碎”部分；然后与其他两个一起制定生成解决方案的步骤。

较小的变化是关于生成递归函数的终止行为。与结构设计的功能不同，某些输入的算法可能不会终止。此问题可能是由于构思的固有限制或将构思转换为代码所致。无论如何，您的程序的未来读者都应该对潜在的“不良”输入提出警告。

您将在现实世界中的编程任务中遇到一些简单或众所周知的算法，并且有望应付。对于真正聪明的算法，软件公司聘请高薪的专家，领域专家和数学家来计算概念细节，然后再要求程序员将这些概念转化为程序。您还必须为这种任务做好准备，最好的准备就是练习。
